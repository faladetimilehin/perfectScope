!function(t,e,i){"use strict";var n=t("<div/>").attr("class","imagelightbox-loading").append(t("<div/>")),a=t("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-left"}),o=t("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-right"}),r=a.add(o),l=t("<div/>",{class:"imagelightbox-caption",html:"&nbsp;"}),c=t("<button/>",{type:"button",class:"imagelightbox-close"}),s=t("<div/>",{class:"imagelightbox-overlay"}),u=t("<a/>",{href:"#",class:"imagelightbox-navitem"}),d=t("<div/>",{class:"imagelightbox-nav"}),g=t("<div/>",{class:"imagelightbox-wrapper"}),f=t("body"),h=function(){var t=i.body||i.documentElement;return""===(t=t.style).transition?"":""===t.WebkitTransition?"-webkit-":""===t.MozTransition?"-moz-":""===t.OTransition&&"-o-"},p=!1!==h(),b=function(t,e,i){var n={},a=h();n[a+"transform"]="translateX("+e+") translateY(-50%)",n[a+"transition"]=a+"transform "+i+"s ease-in",t.css(n)},m="ontouchstart"in e,v=e.navigator.pointerEnabled||e.navigator.msPointerEnabled,x=function(t){if(m)return!0;if(!v||void 0===t||void 0===t.pointerType)return!1;if(void 0!==t.MSPOINTER_TYPE_MOUSE){if(t.MSPOINTER_TYPE_MOUSE!==t.pointerType)return!0}else if("mouse"!==t.pointerType)return!0;return!1},y=!!(i.fullscreenEnabled||i.webkitFullscreenEnabled||i.mozFullScreenEnabled||i.msFullscreenEnabled),E=!(!e.history||!history.pushState);t.fn.imageLightbox=function(a){var o="",h=t([]),w=t(),S=t([]),q=-1,I=t(),k=0,O=!1,C=0,T=t.extend({selector:"a[data-imagelightbox]",id:"imagelightbox",allowedTypes:"png|jpg|jpeg|gif",animationSpeed:250,activity:!1,arrows:!1,button:!1,caption:!1,enableKeyboard:!0,history:!1,fullscreen:!1,gutter:10,offsetY:0,navigation:!1,overlay:!1,preloadNext:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,quitOnEscKey:!0},a),L=function(){T.activity&&N(),T.arrows&&r.css("display","block")},P=function(t,e,i){var n=e+"="+i,a="?"+n;if(t){var o=new RegExp("([?&])"+e+"=[^&]*");a=null!==t.match(o)?t.replace(o,"$1"+n):t+"&"+n}return a},F=function(){if(E&&T.history){var t=h[q].dataset.ilb2Id;t||(t=q);var n={imageLightboxIndex:t},a=h[q].dataset.imagelightbox;a&&(n.imageLightboxSet=a);var o=P(i.location.search,"imageLightboxIndex",t);a&&(o=P(o,"imageLightboxSet",a)),e.history.pushState(n,"",i.location.pathname+o)}},M=function(t,e){var i=t;if(i){var n=new RegExp("\\?"+e+"=[^&]*"),a=new RegExp("&"+e+"=[^&]*");i=(i=i.replace(n,"?")).replace(a,"")}return i},D=function(t){var e=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(i.location.search);if(e&&e[2])return decodeURIComponent(e[2].replace(/\+/g," "))},R=function(){if(E&&T.history){var e=D("imageLightboxIndex");if(e){var i=h.filter('[data-ilb2-id="'+e+'"]');i.length>0?q=h.index(i):i=t(h[q=e]);var n=D("imageLightboxSet");!i[0]||n&&n!==i[0].dataset.imagelightbox||Q(i,!0)}}},z=function(){if(--q<0){if(!0===T.quitOnEnd)return void A();q=h.length-1}w=h.eq(q),F(),g.trigger("previous.ilb2",w),$(1)},X=function(){if(++q>=h.length){if(!0===T.quitOnEnd)return void A();q=0}F(),w=h.eq(q),g.trigger("next.ilb2",w),$(-1)},j=function(){g.append(n)},N=function(){t(".imagelightbox-loading").remove()},U=function(){g.append(s)},V=function(){c.appendTo(g).on("click.ilb7",function(){return A(),!1})},K=function(){l.css("opacity","0"),l.html("&nbsp;"),t(w).data("ilb2-caption")?(l.css("opacity","1"),l.html(t(w).data("ilb2-caption"))):t(w).find("img").attr("alt")&&(l.css("opacity","1"),l.html(t(w).find("img").attr("alt")))},Y=function(){if(h.length){for(var e=0;e<h.length;e++)d.append(u.clone());var i=d.children("a");i.eq(h.index(w)).addClass("active"),g.on("previous.ilb2 next.ilb2",function(){i.removeClass("active").eq(h.index(w)).addClass("active")}),g.append(d),d.on("click.ilb7 touchend.ilb7",function(){return!1}).on("click.ilb7 touchend.ilb7","a",function(){var e=t(this);if(h.eq(e.index()).attr("href")!==t(".imagelightbox").attr("src")){var i=h.eq(e.index());i.length&&(C=h.index(w),w=i,$(e.index()<C?-1:1))}e.addClass("active").siblings().removeClass("active")})}},_=function(){g.append(r),r.on("click.ilb7 touchend.ilb7",function(e){return e.stopImmediatePropagation(),e.preventDefault(),t(this).hasClass("imagelightbox-arrow-left")?z():X(),!1})},H=function(e){return"a"===t(e).prop("tagName").toLowerCase()&&(new RegExp(".("+T.allowedTypes+")$","i").test(t(e).attr("href"))||t(e).data("ilb2Video"))},W=function(){if(!I.length)return!0;var i=T.caption?l.outerHeight():0,n=t(e).width(),a=t(e).height()-i,o=Math.abs(1-T.gutter/100);function r(i,r){if(i>n||r>a){var l=i/r>n/a?i/n:r/a;i/=l,r/=l}var c=r*o,s=i*o,u=(t(e).width()-s)/2;I.css({width:s+"px",height:c+"px",left:u+"px"})}if(void 0===I.get(0).videoWidth){var c=new Image;c.src=I.attr("src"),c.onload=function(){r(c.width,c.height)}}else r(I.get(0).videoWidth,I.get(0).videoHeight)},$=function(e){if(O)return!1;if(I.length){var i={opacity:0};p?b(I,100*e-k+"px",T.animationSpeed/1e3):i.left=parseInt(I.css("left"))+100*e+"px",I.animate(i,T.animationSpeed,function(){B()}),k=0}O=!0,T.activity&&j(),T.caption&&K(),setTimeout(function(){var i,n,a=w.attr("href"),o=0,r=0,l=0,c=w.data("ilb2Video");function s(){var i={opacity:1};if(I.appendTo(g),W(),I.css("opacity",0),p)b(I,-100*e+"px",0),setTimeout(function(){b(I,"0px",T.animationSpeed/1e3)},50);else{var n=parseInt(I.css("left"));i.left=n+"px",I.css("left",n-100*e+"px")}if(I.animate(i,T.animationSpeed,function(){O=!1,L()}),T.preloadNext){var a=h.eq(h.index(w)+1);a.length||(a=h.eq(0)),t("<img />").attr("src",a.attr("href"))}g.trigger("loaded.ilb2")}c?S.each(function(){this.i===w.data("ilb2VideoId")&&(i=this.l,n=this.e,this.a&&(!1===i&&n.attr("autoplay",this.a),!0===i&&n.get(0).play()))}):n=t("<img id='"+T.id+"' />").attr("src",a),I=n.on("load.ilb7",s).on("error.ilb7",function(){L()}).on("touchstart.ilb7 pointerdown.ilb7 MSPointerDown.ilb7",function(t){if(!x(t.originalEvent)||T.quitOnImgClick)return!0;p&&(l=parseInt(I.css("left"))),o=t.originalEvent.pageX||t.originalEvent.touches[0].pageX}).on("touchmove.ilb7 pointermove.ilb7 MSPointerMove.ilb7",function(t){if(!v&&"pointermove"===t.type||!x(t.originalEvent)||T.quitOnImgClick)return!0;t.preventDefault(),r=t.originalEvent.pageX||t.originalEvent.touches[0].pageX,k=o-r,p?b(I,-k+"px",0):I.css("left",l-k+"px")}).on("touchend.ilb7 touchcancel.ilb7 pointerup.ilb7 pointercancel.ilb7 MSPointerUp.ilb7 MSPointerCancel.ilb7",function(t){if(!x(t.originalEvent)||T.quitOnImgClick)return!0;Math.abs(k)>50?k<0?z():X():p?b(I,"0px",T.animationSpeed/1e3):I.animate({left:l+"px"},T.animationSpeed/2)}),!0===i&&s(),!1===i&&(I=I.on("loadedmetadata.ilb7",s)),c||(I=I.on(v?"pointerup.ilb7 MSPointerUp.ilb7":"click.ilb7",function(t){if(t.preventDefault(),T.quitOnImgClick)return A(),!1;if(x(t.originalEvent))return!0;var e=(t.pageX||t.originalEvent.pageX)-t.target.offsetLeft;t.target.width/2>e?z():X()}))},T.animationSpeed+100)},B=function(){if(!I.length)return!1;I.remove(),I=t()},Q=function(t,e){if(O)return!1;O=!1,w=t,q=h.index(w),e||F(),function(){T.arrows&&_(this),T.navigation&&Y(),T.overlay&&U(),T.button&&V(),T.caption&&g.append(l)}(),f.append(g).addClass("imagelightbox-open"),g.trigger("start.ilb2",t),$(0)},A=function(t){if(q=-1,t||function(){if(E&&T.history){var t=M(i.location.search,"imageLightboxIndex");t=M(t,"imageLightboxSet"),e.history.pushState({},"",i.location.pathname+t)}}(),g.trigger("quit.ilb2"),f.removeClass("imagelightbox-open"),!I.length)return!1;I.animate({opacity:0},T.animationSpeed,function(){B(),O=!1,g.remove().find("*").remove()})},G=function(e){e.each(function(){h=e.add(t(this))}),e.on("click.ilb7",{set:o},function(i){i.preventDefault(),o=t(i.currentTarget).data("imagelightbox"),e.filter(function(){return t(this).data("imagelightbox")===o}).filter(function(){return H(t(this))}).each(function(){h=h.add(t(this))}),h.length<1?A():Q(t(this))})},J=function(e){e.each(function(){var e=t(this).data("ilb2Video");if(e){var i=t(this).data("ilb2Id");i||(i="a"+(65536*(1+Math.random())|0).toString(16)),t(this).data("ilb2VideoId",i);var n={e:t("<video id='"+T.id+"' preload='metadata'>"),i:i,l:!1,a:void 0};t.each(e,function(t,e){"autoplay"===t?n.a=e:"sources"!==t&&(n.e=n.e.attr(t,e))}),e.sources&&t.each(e.sources,function(e,i){var a=t("<source>");t.each(i,function(t,e){a=a.attr(t,e)}),n.e.append(a)}),n.e.on("loadedmetadata.ilb7",function(){n.l=!0}),S=S.add(n)}})};return t(e).on("resize.ilb7",W),E&&T.history&&t(e).on("popstate",function(e){var i=e.originalEvent.state;if(i){var n=i.imageLightboxIndex;if(void 0!==n){var a=h.filter('[data-ilb2-id="'+n+'"]');if(a.length>0)var o=h.index(a);else a=t(h[o=n]);if(a[0]&&(!i.imageLightboxSet||i.imageLightboxSet===a[0].dataset.imagelightbox))if(q<0)Q(a,!0);else{var r=1;o>q&&(r=-1),w=a,q=o,$(r)}}else A(!0)}else A(!0)}),t(i).ready(function(){T.quitOnDocClick&&t(i).on(m?"touchend.ilb7":"click.ilb7",function(e){I.length&&!t(e.target).is(I)&&(e.preventDefault(),A())}),T.fullscreen&&y&&t(i).on("keydown.ilb7",function(t){if(!I.length)return!0;var n,a,o,r;[9,32,38,40].indexOf(t.which)>-1&&(t.stopPropagation(),t.preventDefault()),[13].indexOf(t.which)>-1&&(t.stopPropagation(),t.preventDefault(),n=e.document,a=i.getElementById(T.id).parentElement,o=a.requestFullscreen||a.mozRequestFullScreen||a.webkitRequestFullScreen||a.msRequestFullscreen,r=n.exitFullscreen||n.mozCancelFullScreen||n.webkitExitFullscreen||n.msExitFullscreen,n.fullscreenElement||n.mozFullScreenElement||n.webkitFullscreenElement||n.msFullscreenElement?r.call(n):o.call(a))}),T.enableKeyboard&&t(i).on("keydown.ilb7",function(t){if(!I.length)return!0;[27].indexOf(t.which)>-1&&T.quitOnEscKey&&(t.stopPropagation(),t.preventDefault(),A()),[37].indexOf(t.which)>-1&&(t.stopPropagation(),t.preventDefault(),z()),[39].indexOf(t.which)>-1&&(t.stopPropagation(),t.preventDefault(),X())})}),t(i).off("click",T.selector),G(t(this)),R(),J(h),this.addToImageLightbox=function(t){G(t),J(t)},this.openHistory=function(){R()},this.loadPreviousImage=function(){z()},this.loadNextImage=function(){X()},this.quitImageLightbox=function(){return A(),this},this.startImageLightbox=function(e){e?e.trigger("click.ilb7"):t(this).trigger("click.ilb7")},this}}("object"==typeof module&&"object"==typeof module.exports?require("jquery"):jQuery,window,document);